/*
   Code Blocks
   ========================================================================== */

// Inline code styling within content
.page__content {
  // Improve code blocks appearance to match terminal/Vim with dark theme
  code {
    border-radius: 4px;
    font-family:
      "JetBrains Mono", "Fira Code", "SFMono-Regular", Consolas, Monaco,
      "Liberation Mono", monospace;
    background-color: if(variable-exists('theme-surface'), $theme-surface, darken($background-color, 5%));
    border: 1px solid $border-color;
    color: if(variable-exists('nord11'), $nord11, $primary-color);
    padding: 0.2em 0.4em;
    font-size: 0.95em;
  }

  pre {
    border-radius: 6px;
    border: 1px solid $border-color;
    background-color: if(variable-exists('nord0'), $nord0, #2E3440);
    padding: 1em;
    margin: 1em 0;
    overflow-x: auto;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

    > code {
      border: none;
      background: none;
      padding: 0;
      color: if(variable-exists('nord6'), $nord6, #ECEFF4);
      font-size: 0.9em;
      line-height: 1.5;

      // Terminal/Vim-like syntax highlighting
      .c,
      .c1,
      .cm,
      .cp,
      .cs {
        color: $theme-text-muted;
      } // Comments
      .k,
      .kd,
      .kn,
      .kp,
      .kr,
      .kt {
        color: $primary-color;
      } // Keywords
      .o,
      .p {
        color: $theme-text-secondary;
      } // Operators, punctuation
      .s,
      .s1,
      .s2,
      .sb,
      .sc,
      .sd,
      .se,
      .sh,
      .si,
      .sx {
        color: $theme-warning;
      } // Strings
      .na,
      .nb,
      .nc,
      .no,
      .nd,
      .ni,
      .ne,
      .nf,
      .nl,
      .nn,
      .nx,
      .py {
        color: $theme-accent-secondary;
      } // Names, functions
      .m,
      .mf,
      .mh,
      .mi,
      .mo {
        color: $theme-warning;
      } // Numbers
      .nt,
      .nv,
      .vc,
      .vg,
      .vi {
        color: $theme-info;
      } // Tags, variables
      .w {
        color: $text-color;
      } // Whitespace
      .err {
        color: $theme-danger;
      } // Errors
      .bp,
      .n {
        color: $text-color;
      } // Built-ins, names
      .kc,
      .l,
      .ld {
        color: $theme-accent-secondary;
      } // Constants, literals
      .sr,
      .ss {
        color: $theme-info;
      } // Regex
      .gd {
        color: $theme-danger;
      } // Deleted
      .gi {
        color: $theme-info;
      } // Inserted
      .gh,
      .gu {
        color: $theme-text-secondary;
      } // Headers
      .gp {
        color: $theme-text-muted;
      } // Prompt
    }
  }
}

// Modern code blocks
div.highlighter-rouge,
figure.highlight {
  background-color: $theme-surface;
  color: $text-color;
  font-family: "JetBrains Mono", "Fira Code", monospace;
  border-radius: 8px;
  margin: 1.5em 0;
  padding: 0;
  border: 1px solid rgba($theme-border-light, 0.6);
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.04);
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &:before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(to right, $primary-color, $theme-accent-secondary);
    opacity: 0.7;
    z-index: 1;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.06);

    &:before {
      opacity: 1;
    }
  }

  pre.highlight {
    padding: 1.2em 1em;
    margin: 0;
    overflow-x: auto;
    line-height: 1.6;
    font-size: 0.9em;

    // Line numbers
    .lineno {
      color: $theme-text-secondary;
      margin-right: 1em;
      padding-right: 0.5em;
      border-right: 1px solid rgba($theme-border-light, 0.5);
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    // Code comments
    .c,
    .c1,
    .cm,
    .cp,
    .cs {
      font-style: italic;
    }

    // Code strings
    .s,
    .s1,
    .s2,
    .sb,
    .sc,
    .sd,
    .se,
    .sh,
    .si,
    .sx {
      color: $theme-accent-secondary;
    }

    // Keywords
    .k,
    .kc,
    .kd,
    .kn,
    .kp,
    .kr,
    .kt {
      color: $primary-color;
      font-weight: 600;
    }

    // Functions
    .nf,
    .fm {
      color: $link-color;
    }
  }
}

// Inline code styling
code.highlighter-rouge {
  background-color: rgba($theme-border-light, 0.4);
  color: $primary-color;
  font-family: "JetBrains Mono", "Fira Code", monospace;
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-size: 0.9em;
  border: 1px solid rgba($theme-border-light, 0.3);
  transition: all 0.2s ease;

  &:hover {
    background-color: rgba($theme-border-light, 0.6);
    border-color: rgba($theme-border-light, 0.5);
  }
}
