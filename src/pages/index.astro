---
import BaseLayout from '../layouts/BaseLayout.astro';
import Container from '../components/Container.astro';
import Card from '../components/Card.astro';
import CardTitle from '../components/CardTitle.astro';
import CardDescription from '../components/CardDescription.astro';
import CardCta from '../components/CardCta.astro';
import CardEyebrow from '../components/CardEyebrow.astro';
import Button from '../components/Button.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 3);

function formatDate(date: Date): string {
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}

// Social links
const socialLinks = [
  {
    href: 'https://github.com/jamesbrink',
    label: 'Follow on GitHub',
    icon: 'github',
  },
  {
    href: 'https://www.linkedin.com/in/james-brink-15816219/',
    label: 'Follow on LinkedIn',
    icon: 'linkedin',
  },
];
---

<BaseLayout title="Home" description="James Brink - SRE/DevOps Engineer, Infrastructure Automator, and Tinkerer of Terror">
  <Container class="mt-9">
    <div class="max-w-2xl">
      <h1
        class="text-4xl font-bold tracking-tight text-zinc-800 sm:text-5xl dark:text-zinc-100"
      >
        SRE/DevOps Engineer, Infrastructure Automator, and Tinkerer of Terror
      </h1>
      <p class="mt-6 text-base text-zinc-600 dark:text-zinc-400">
        I'm James, a battle-hardened SRE/DevOps engineer who's spent decades making
        computers do things they'd rather not. My days are filled with breaking and
        fixing infrastructure, constantly switching between Terraform, NixOS, and
        whatever shiny tech caught my ADHD brain's attention this week.
      </p>
      <div class="mt-6 flex gap-6">
        {
          socialLinks.map((link) => (
            <a
              href={link.href}
              class="group -m-1 p-1"
              aria-label={link.label}
              target="_blank"
              rel="noopener noreferrer"
            >
              {link.icon === 'github' && (
                <svg
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                  class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487 0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062 0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717 0 0 .837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346.85 0 1.7.115 2.5.346 1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756 0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897 0 1.371-.013 2.473-.013 2.82 0 .268.188.589.688.486a10.039 10.039 0 0 0 4.932-3.74A10.447 10.447 0 0 0 22 12.253C22 6.588 17.525 2 12 2Z"
                  />
                </svg>
              )}
              {link.icon === 'linkedin' && (
                <svg
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                  class="h-6 w-6 fill-zinc-500 transition group-hover:fill-zinc-600 dark:fill-zinc-400 dark:group-hover:fill-zinc-300"
                >
                  <path d="M18.335 18.339H15.67v-4.177c0-.996-.02-2.278-1.39-2.278-1.389 0-1.601 1.084-1.601 2.205v4.25h-2.666V9.75h2.56v1.17h.035c.358-.674 1.228-1.387 2.528-1.387 2.7 0 3.2 1.778 3.2 4.091v4.715zM7.003 8.575a1.546 1.546 0 01-1.548-1.549 1.548 1.548 0 111.547 1.549zm1.336 9.764H5.666V9.75H8.34v8.589zM19.67 3H4.329C3.593 3 3 3.58 3 4.297v15.406C3 20.42 3.594 21 4.328 21h15.338C20.4 21 21 20.42 21 19.703V4.297C21 3.58 20.4 3 19.666 3h.003z" />
                </svg>
              )}
            </a>
          ))
        }
      </div>
    </div>
  </Container>

  <!-- Recent Articles -->
  <Container class="mt-24 md:mt-28">
    <div class="mx-auto grid max-w-xl grid-cols-1 gap-y-20 lg:max-w-none lg:grid-cols-2">
      <div class="flex flex-col gap-16">
        <h2 class="text-2xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100">
          Recent Articles
        </h2>
        {
          posts.map((post) => (
            <Card as="article">
              <CardTitle href={`/blog/${post.slug}/`}>
                {post.data.title}
              </CardTitle>
              <CardEyebrow
                as="time"
                dateTime={post.data.date.toISOString()}
                decorate
              >
                {formatDate(post.data.date)}
              </CardEyebrow>
              <CardDescription>{post.data.description}</CardDescription>
              <CardCta>Read article</CardCta>
            </Card>
          ))
        }
        <div class="mt-8">
          <Button href="/blog" variant="secondary">
            View all articles
          </Button>
        </div>
      </div>
      <div class="space-y-10 lg:pl-16 xl:pl-24">
        <!-- Work/Resume section -->
        <div class="rounded-2xl border border-zinc-100 p-6 dark:border-zinc-700/40">
          <h2 class="flex text-sm font-semibold text-zinc-900 dark:text-zinc-100">
            <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-6 w-6 flex-none">
              <path d="M2.75 9.75a3 3 0 0 1 3-3h12.5a3 3 0 0 1 3 3v8.5a3 3 0 0 1-3 3H5.75a3 3 0 0 1-3-3v-8.5Z" class="fill-zinc-100 stroke-zinc-400 dark:fill-zinc-100/10 dark:stroke-zinc-500" />
              <path d="M3 14.25h6.249c.484 0 .952-.002 1.316.319l.777.682a.996.996 0 0 0 1.316 0l.777-.682c.364-.32.832-.319 1.316-.319H21M8.75 6.5V4.75a2 2 0 0 1 2-2h2.5a2 2 0 0 1 2 2V6.5" class="stroke-zinc-400 dark:stroke-zinc-500" />
            </svg>
            <span class="ml-3">Work</span>
          </h2>
          <ol class="mt-6 space-y-4">
            <li class="flex gap-4">
              <div class="relative mt-1 flex h-10 w-10 flex-none items-center justify-center rounded-full shadow-md ring-1 shadow-zinc-800/5 ring-zinc-900/5 dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0">
                <span class="text-xs font-bold text-zinc-600 dark:text-zinc-400">IN</span>
              </div>
              <dl class="flex flex-auto flex-wrap gap-x-2">
                <dt class="sr-only">Company</dt>
                <dd class="w-full flex-none text-sm font-medium text-zinc-900 dark:text-zinc-100">
                  Infosys
                </dd>
                <dt class="sr-only">Role</dt>
                <dd class="text-xs text-zinc-500 dark:text-zinc-400">
                  Technology Architect
                </dd>
                <dt class="sr-only">Date</dt>
                <dd class="ml-auto text-xs text-zinc-400 dark:text-zinc-500" aria-label="2023 until Present">
                  <time datetime="2023">2023</time>
                  <span aria-hidden="true">—</span>
                  <time datetime={new Date().getFullYear().toString()}>Present</time>
                </dd>
              </dl>
            </li>
            <li class="flex gap-4">
              <div class="relative mt-1 flex h-10 w-10 flex-none items-center justify-center rounded-full shadow-md ring-1 shadow-zinc-800/5 ring-zinc-900/5 dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0">
                <span class="text-xs font-bold text-zinc-600 dark:text-zinc-400">FTX</span>
              </div>
              <dl class="flex flex-auto flex-wrap gap-x-2">
                <dt class="sr-only">Company</dt>
                <dd class="w-full flex-none text-sm font-medium text-zinc-900 dark:text-zinc-100">
                  Blockfolio/FTX
                </dd>
                <dt class="sr-only">Role</dt>
                <dd class="text-xs text-zinc-500 dark:text-zinc-400">
                  Site Reliability Engineer
                </dd>
                <dt class="sr-only">Date</dt>
                <dd class="ml-auto text-xs text-zinc-400 dark:text-zinc-500" aria-label="2020 until 2022">
                  <time datetime="2020">2020</time>
                  <span aria-hidden="true">—</span>
                  <time datetime="2022">2022</time>
                </dd>
              </dl>
            </li>
            <li class="flex gap-4">
              <div class="relative mt-1 flex h-10 w-10 flex-none items-center justify-center rounded-full shadow-md ring-1 shadow-zinc-800/5 ring-zinc-900/5 dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0">
                <span class="text-xs font-bold text-zinc-600 dark:text-zinc-400">GD</span>
              </div>
              <dl class="flex flex-auto flex-wrap gap-x-2">
                <dt class="sr-only">Company</dt>
                <dd class="w-full flex-none text-sm font-medium text-zinc-900 dark:text-zinc-100">
                  GoDaddy
                </dd>
                <dt class="sr-only">Role</dt>
                <dd class="text-xs text-zinc-500 dark:text-zinc-400">
                  Site Reliability Engineer
                </dd>
                <dt class="sr-only">Date</dt>
                <dd class="ml-auto text-xs text-zinc-400 dark:text-zinc-500" aria-label="2015 until 2016">
                  <time datetime="2015">2015</time>
                  <span aria-hidden="true">—</span>
                  <time datetime="2016">2016</time>
                </dd>
              </dl>
            </li>
          </ol>
          <Button href="/resume" variant="secondary" class="group mt-6 w-full">
            View full resume
            <svg viewBox="0 0 16 16" fill="none" aria-hidden="true" class="h-4 w-4 stroke-zinc-400 transition group-active:stroke-zinc-600 dark:group-hover:stroke-zinc-50 dark:group-active:stroke-zinc-50">
              <path d="M4.75 8.75 8 12.25m0 0 3.25-3.5M8 12.25v-8.5" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </Button>
        </div>
      </div>
    </div>
  </Container>
</BaseLayout>
