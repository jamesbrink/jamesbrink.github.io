---
/**
 * Card component for displaying high-resolution mosaic previews
 * Links to the deep-zoom viewer page
 */
import type { AstroMosaic } from '../data/mosaics';

interface Props {
  mosaic: AstroMosaic;
}

const { mosaic } = Astro.props;

function formatDimensions(width: number, height: number): string {
  return `${(width / 1000).toFixed(1)}K x ${(height / 1000).toFixed(1)}K`;
}
---

<a
  href={`/astrophotography/mosaics/${mosaic.id}`}
  class="group relative aspect-[3/2] overflow-hidden rounded-2xl bg-zinc-100 dark:bg-zinc-800"
  aria-label={`View ${mosaic.title} in deep-zoom viewer`}
>
  <img
    src={mosaic.preview}
    alt={`${mosaic.title} - ${mosaic.catalogId}`}
    loading="lazy"
    decoding="async"
    class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
  />

  {/* Hover overlay */}
  <div
    class="absolute inset-0 flex flex-col items-center justify-center bg-black/60 opacity-0 transition duration-300 group-hover:opacity-100"
  >
    <h3 class="text-lg font-semibold text-white">{mosaic.title}</h3>
    <p class="text-sm text-teal-400">{mosaic.catalogId}</p>
    <p class="mt-2 text-xs text-zinc-300">
      {formatDimensions(mosaic.dimensions.width, mosaic.dimensions.height)} resolution
    </p>
    <span
      class="mt-3 inline-flex items-center gap-1 rounded-full bg-teal-500/20 px-3 py-1 text-sm font-medium text-teal-400"
    >
      <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
      </svg>
      Explore
    </span>
  </div>

  {/* Resolution badge */}
  <div class="absolute top-3 right-3 rounded-full bg-black/60 px-2 py-1 backdrop-blur-sm">
    <span class="text-xs font-medium text-white"
      >{formatDimensions(mosaic.dimensions.width, mosaic.dimensions.height)}</span
    >
  </div>
</a>
