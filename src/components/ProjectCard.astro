---
import clsx from 'clsx';

export interface Project {
  name: string;
  tagline: string;
  description: string;
  href: string;
  techStack: string[];
  featured?: boolean;
  stars?: number;
  forks?: number;
}

interface Props {
  project: Project;
  featured?: boolean;
}

const { project, featured = false } = Astro.props;
---

<a
  href={project.href}
  target="_blank"
  rel="noopener noreferrer"
  class={clsx(
    'group relative flex flex-col rounded-2xl border p-6 transition',
    'border-zinc-100 hover:border-zinc-200 dark:border-zinc-700/40 dark:hover:border-zinc-700',
    featured && 'bg-zinc-50/50 dark:bg-zinc-800/50'
  )}
>
  <div class="flex items-start justify-between gap-4">
    <div class="flex-1">
      <h3
        class={clsx(
          'font-semibold text-zinc-800 group-hover:text-teal-500 dark:text-zinc-100 dark:group-hover:text-teal-400',
          featured ? 'text-lg' : 'text-base'
        )}
      >
        {project.name}
      </h3>
      <p class="mt-1 text-sm font-medium text-teal-600 dark:text-teal-400">
        {project.tagline}
      </p>
    </div>
    {
      (project.stars !== undefined || project.forks !== undefined) && (
        <div class="flex items-center gap-3 text-xs text-zinc-500 dark:text-zinc-400">
          {project.stars !== undefined && (
            <span class="flex items-center gap-1" title={`${project.stars} stars`}>
              <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
              </svg>
              {project.stars}
            </span>
          )}
          {project.forks !== undefined && (
            <span class="flex items-center gap-1" title={`${project.forks} forks`}>
              <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                <path
                  fill-rule="evenodd"
                  d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                  clip-rule="evenodd"
                />
              </svg>
              {project.forks}
            </span>
          )}
        </div>
      )
    }
  </div>

  <p class={clsx('mt-4 text-zinc-600 dark:text-zinc-400', featured ? 'text-sm' : 'text-sm')}>
    {project.description}
  </p>

  <div class="mt-4 flex flex-wrap gap-2">
    {
      project.techStack.map((tech) => (
        <span class="inline-flex items-center rounded-full bg-zinc-100 px-2.5 py-0.5 text-xs font-medium text-zinc-600 dark:bg-zinc-800 dark:text-zinc-300">
          {tech}
        </span>
      ))
    }
  </div>

  <div
    class="mt-4 flex items-center gap-2 text-sm text-zinc-500 group-hover:text-teal-500 dark:text-zinc-400 dark:group-hover:text-teal-400"
  >
    <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M12 2C6.475 2 2 6.588 2 12.253c0 4.537 2.862 8.369 6.838 9.727.5.09.687-.218.687-.487 0-.243-.013-1.05-.013-1.91C7 20.059 6.35 18.957 6.15 18.38c-.113-.295-.6-1.205-1.025-1.448-.35-.192-.85-.667-.013-.68.788-.012 1.35.744 1.538 1.051.9 1.551 2.338 1.116 2.912.846.088-.666.35-1.115.638-1.371-2.225-.256-4.55-1.14-4.55-5.062 0-1.115.387-2.038 1.025-2.756-.1-.256-.45-1.307.1-2.717 0 0 .837-.269 2.75 1.051.8-.23 1.65-.346 2.5-.346.85 0 1.7.115 2.5.346 1.912-1.333 2.75-1.05 2.75-1.05.55 1.409.2 2.46.1 2.716.637.718 1.025 1.628 1.025 2.756 0 3.934-2.337 4.806-4.562 5.062.362.32.675.936.675 1.897 0 1.371-.013 2.473-.013 2.82 0 .268.188.589.688.486a10.039 10.039 0 0 0 4.932-3.74A10.447 10.447 0 0 0 22 12.253C22 6.588 17.525 2 12 2Z"
      ></path>
    </svg>
    <span>View on GitHub</span>
    <svg
      class="h-4 w-4 transition group-hover:translate-x-1"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
    </svg>
  </div>
</a>
